#!/usr/bin/env python
"""
"""

from __future__ import absolute_import
import sys
from argparse import ArgumentParser, RawDescriptionHelpFormatter

from pytadbit.tools import tadbit_map
from pytadbit.tools import tadbit_parse

def main(arguments):
    if len(arguments) > 1:
        subcommand = arguments[1]
        if  subcommand == "version":
            from pytadbit import __version__
            print(__version__)
            return

    parser = ArgumentParser()
    subparser = parser.add_subparsers(title="AVAILABLE PROGRAMS")

    # - MAP -
    map_args_pp = subparser.add_parser("map",
                                          description=tadbit_map.DESC,
                                          formatter_class=RawDescriptionHelpFormatter)
    map_args_pp.set_defaults(func=tadbit_map.run)
    tadbit_map.populate_args(map_args_pp)

    # - PARSE -
    parse_args_pp = subparser.add_parser("parse",
                                         description=tadbit_parse.DESC,
                                         formatter_class=RawDescriptionHelpFormatter)
    parse_args_pp.set_defaults(func=tadbit_parse.run)
    tadbit_parse.populate_args(parse_args_pp)

    # - FILTER -
    filter_args_pp = subparser.add_parser("filter",
                                          description=tadbit_filter.DESC,
                                          formatter_class=RawDescriptionHelpFormatter)
    filter_args_pp.set_defaults(func=tadbit_filter.run)
    tadbit_filter.populate_args(filter_args_pp)

    if len(arguments) == 1:
        parser.print_usage()
        return

    # Call main program
    args = parser.parse_args(arguments[1:])
    args.func(args)





if __name__ == "__main__":
    main(sys.argv)
